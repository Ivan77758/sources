

<script type="text/x-template" id="message-list">
  <div class="message-list" v-show="!error">
    <div class="abuse-widget">
      <button class="btn" @click="dialog.abuse = true">
        Замечаний нет
      </button>
      <div class="abuse-widget__hint" v-if="abuseSuccessHint" @click="abuseSuccessHint = false">
        Спасибо, замечание скоро появится в списке
      </div>
    </div>

    <abuse-dialog :humanId="humanId" v-if="dialog.abuse"
      @needed="dialog.claim = true"
      @success="abuseSuccessHint = true"
      @close="dialog.abuse = false"/>
    <claim-needed  v-if="dialog.claim" @close="dialog.claim = false"/>

    <div class="messages__new" v-show="newCount" @click="load">
      <span class="messages__new-lamp">Новые
      +<b>{{newCount}}</b>
      </span>
    </div>
    <div class="messages__next" @click="loadNext" v-show="more">
      <span class="btn btn-default btn-xs">Следующие</span>
    </div>
    <div class="messages" v-if="count">
      <template v-for="(item, index) in messages">
        <list-date :list="messages" :index="index"/>
        <message-item
          :item="item"
          :index="index"
          :count="count"
          :alert="attention"
          :key="index"
          @admit="admit"
          @remove="remove"
          @set-new="setNew"/>
      </template>
    </div>
    <div class="messages__loader" v-show="!error && !response">
      <span>
        <img src="/static/img/icon/mess_loader.gif" v-show="toSlow" style="display: none;">
        Загружаем
      </span>
    </div>
  </div>
</script>
